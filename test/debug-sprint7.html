<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JwListBox Sprint 7 Debug - CRUD & Targeted Updates</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .container {
            width: 800px;
            height: 400px;
            border: 2px solid #333;
            margin: 20px 0;
        }
        .controls {
            margin: 10px 0;
        }
        button {
            margin: 5px;
            padding: 8px 16px;
        }
        .debug {
            background: #f5f5f5;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ccc;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 200px;
            overflow-y: auto;
        }
        .section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            background: #f9f9f9;
        }
        .section h3 {
            margin-top: 0;
        }
        .event-log {
            background: #e8f4f8;
            border: 1px solid #b0d4e3;
            padding: 10px;
            margin: 10px 0;
            max-height: 200px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 12px;
        }
        .data-summary {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 10px;
            margin: 10px 0;
            font-family: monospace;
            font-weight: bold;
        }
        .inline-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .input-row {
            margin: 10px 0;
            display: flex;
            gap: 10px;
            align-items: center;
        }
        .input-row label {
            font-weight: bold;
            min-width: 80px;
        }
        .input-row input, .input-row select {
            padding: 5px;
            margin: 0 5px;
        }
        .smart-demo {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        .update-form {
            background: #e2e3e5;
            border: 1px solid #d6d8db;
            padding: 15px;
            margin: 10px 0;
            border-radius: 4px;
        }
        .update-form h4 {
            margin-top: 0;
            color: #495057;
        }
    </style>
</head>
<body>
    <h1>JwListBox Sprint 7 Debug - CRUD & Targeted Updates</h1>
    <p>Testing smart rendering for Create, Read, Update, Delete operations</p>

    <!-- Data Summary Display -->
    <div class="data-summary" id="data-summary">
        Master Data: 0 rows | View Data: 0 rows | Selected: 0
    </div>

    <div class="smart-demo">
        <strong>Smart Rendering Demo:</strong> 
        Watch the DOM carefully! These operations should update only the affected elements without full re-renders.
        Open browser DevTools to see targeted DOM changes.
    </div>

    <!-- Update Operations -->
    <div class="section">
        <h3>Update Operations (Smart Rendering)</h3>
        <p><em>updateRow(id, dataOrField, newValue) - Updates data and only the affected DOM elements</em></p>
        
        <div class="update-form">
            <h4>Single Field Update</h4>
            <div class="input-row">
                <label>Row ID:</label>
                <input type="number" id="update-field-id" value="1" min="1" max="10">
                <label>Field:</label>
                <select id="update-field-name">
                    <option value="firstName">First Name</option>
                    <option value="lastName">Last Name</option>
                    <option value="age">Age</option>
                    <option value="department">Department</option>
                    <option value="salary">Salary</option>
                    <option value="isActive">Active Status</option>
                </select>
                <label>New Value:</label>
                <input type="text" id="update-field-value" placeholder="Enter new value">
                <button onclick="updateSingleField()">Update Field</button>
            </div>
        </div>

        <div class="update-form">
            <h4>Entire Row Update</h4>
            <div class="input-row">
                <label>Row ID:</label>
                <input type="number" id="update-row-id" value="2" min="1" max="10">
                <button onclick="updateEntireRow()">Update Entire Row</button>
                <span style="margin-left: 10px; color: #666;">
                    (Updates ID 2 with predefined new data)
                </span>
            </div>
        </div>

        <div class="inline-buttons">
            <button onclick="quickUpdateDemo()">Quick Demo: Age +1 for ID 3</button>
            <button onclick="quickSalaryBoost()">Quick Demo: Salary +$5k for ID 4</button>
            <button onclick="toggleActiveStatus()">Quick Demo: Toggle Active for ID 5</button>
        </div>
    </div>

    <!-- Remove Operations -->
    <div class="section">
        <h3>Remove Operations (Smart Rendering)</h3>
        <p><em>removeData(ids) - Removes data and only the affected DOM elements</em></p>
        
        <div class="input-row">
            <label>Row ID(s):</label>
            <input type="text" id="remove-ids" placeholder="e.g., 6 or 7,8,9" value="6">
            <button onclick="removeSelectedRows()">Remove Row(s)</button>
            <span style="margin-left: 10px; color: #666;">
                (Comma-separated for multiple)
            </span>
        </div>

        <div class="inline-buttons">
            <button onclick="removeLastRow()">Remove Last Row</button>
            <button onclick="removeFirstRow()">Remove First Row</button>
            <button onclick="removeMultipleRows()">Remove IDs 7,8,9</button>
        </div>
    </div>

    <!-- Add Operations -->
    <div class="section">
        <h3>Add Operations (Smart Rendering)</h3>
        <p><em>addData(data, afterId) - Adds data and inserts new DOM elements at correct positions</em></p>
        
        <div class="input-row">
            <label>After ID:</label>
            <input type="number" id="add-after-id" placeholder="Leave empty for end" min="1">
            <button onclick="addSingleRow()">Add Single Row</button>
            <button onclick="addMultipleRows()">Add Multiple Rows</button>
        </div>

        <div class="inline-buttons">
            <button onclick="addToEnd()">Add to End</button>
            <button onclick="addToBeginning()">Add to Beginning</button>
            <button onclick="addAfterSelected()">Add After Selected</button>
            <button onclick="addRandomEmployee()">Add Random Employee</button>
        </div>
    </div>

    <!-- Combined Operations -->
    <div class="section">
        <h3>Combined Operations (Chaining)</h3>
        <p><em>Test multiple operations in sequence to verify smart rendering works correctly</em></p>
        <div class="inline-buttons">
            <button onclick="addUpdateRemoveChain()">Add → Update → Remove Chain</button>
            <button onclick="massUpdateDemo()">Mass Update Demo</button>
            <button onclick="dataReorganization()">Data Reorganization Demo</button>
            <button onclick="filterUpdateDemo()">Filter + Update Demo</button>
        </div>
    </div>

    <!-- Mode Testing -->
    <div class="section">
        <h3>Display Mode Testing</h3>
        <p><em>Test CRUD operations in both grid and list modes</em></p>
        <div class="inline-buttons">
            <button onclick="switchToGrid()">Switch to Grid Mode</button>
            <button onclick="switchToList()">Switch to List Mode</button>
            <button onclick="testInBothModes()">Test Operations in Both Modes</button>
        </div>
    </div>

    <div class="controls">
        <button onclick="clearEventLog()">Clear Event Log</button>
        <button onclick="clearDebug()">Clear Debug</button>
        <button onclick="reloadData()">Reload Test Data</button>
        <button onclick="showCurrentData()">Show Current Data</button>
    </div>

    <div id="debug-output" class="debug"></div>
    
    <h3>Event Log</h3>
    <div id="event-log" class="event-log"></div>
    
    <div id="container1" class="container"></div>

    <!-- Load DataMaster and JwListBox -->
    <script src="datamaster.js"></script>
    <script src="jw-listbox.js"></script>

    <script>
        let listbox;
        let idCounter = 100; // For generating new IDs
        
        function log(message) {
            const debugOutput = document.getElementById('debug-output');
            debugOutput.textContent += new Date().toLocaleTimeString() + ': ' + message + '\n';
            console.log(message);
        }

        function logEvent(eventName, payload) {
            const eventLog = document.getElementById('event-log');
            const timestamp = new Date().toLocaleTimeString();
            
            // Simplify payload for readability
            let simplifiedPayload = payload;
            if (payload && typeof payload === 'object') {
                if (payload.selectedIds) {
                    simplifiedPayload = { selectedCount: payload.selectionCount, selectedIds: payload.selectedIds };
                } else if (payload.id !== undefined) {
                    simplifiedPayload = { id: payload.id, index: payload.index };
                }
            }
            
            const eventInfo = `[${timestamp}] ${eventName}: ${JSON.stringify(simplifiedPayload)}\n`;
            eventLog.textContent += eventInfo;
            eventLog.scrollTop = eventLog.scrollHeight;
        }

        function updateDataSummary() {
            const summary = document.getElementById('data-summary');
            if (listbox && listbox.dm && listbox.viewDm) {
                const masterCount = listbox.dm.toRecordset().length;
                const viewCount = listbox.viewDm.toRecordset().length;
                const selectedCount = listbox.getSelected().length;
                summary.textContent = `Master Data: ${masterCount} rows | View Data: ${viewCount} rows | Selected: ${selectedCount}`;
            } else {
                summary.textContent = 'Master Data: 0 rows | View Data: 0 rows | Selected: 0';
            }
        }
        
        function clearDebug() {
            document.getElementById('debug-output').textContent = '';
        }

        function clearEventLog() {
            document.getElementById('event-log').textContent = '';
        }

        // Comprehensive test data for CRUD operations
        const testData = [
            { id: 1, firstName: 'Alice', lastName: 'Johnson', age: 28, department: 'Engineering', salary: 85000, isActive: true, email: 'alice@example.com' },
            { id: 2, firstName: 'Bob', lastName: 'Smith', age: 35, department: 'Marketing', salary: 65000, isActive: true, email: 'bob@example.com' },
            { id: 3, firstName: 'Charlie', lastName: 'Brown', age: 42, department: 'Sales', salary: 70000, isActive: false, email: 'charlie@example.com' },
            { id: 4, firstName: 'Diana', lastName: 'Prince', age: 29, department: 'HR', salary: 75000, isActive: true, email: 'diana@example.com' },
            { id: 5, firstName: 'Ethan', lastName: 'Hunt', age: 38, department: 'Operations', salary: 80000, isActive: true, email: 'ethan@example.com' },
            { id: 6, firstName: 'Fiona', lastName: 'Apple', age: 26, department: 'Engineering', salary: 90000, isActive: true, email: 'fiona@example.com' },
            { id: 7, firstName: 'George', lastName: 'Washington', age: 45, department: 'Sales', salary: 72000, isActive: true, email: 'george@example.com' },
            { id: 8, firstName: 'Hannah', lastName: 'Montana', age: 24, department: 'Marketing', salary: 58000, isActive: false, email: 'hannah@example.com' },
            { id: 9, firstName: 'Ivan', lastName: 'Drago', age: 33, department: 'Engineering', salary: 95000, isActive: true, email: 'ivan@example.com' },
            { id: 10, firstName: 'Julia', lastName: 'Roberts', age: 31, department: 'HR', salary: 78000, isActive: true, email: 'julia@example.com' }
        ];

        function createListbox() {
            if (listbox) listbox.destroy();
            
            listbox = new JwListBox('#container1');
            
            // Set up event listeners
            listbox.on('click', (payload) => logEvent('click', payload));
            listbox.on('select', (payload) => logEvent('select', payload));
            listbox.on('error', (error) => {
                log('Error: ' + JSON.stringify(error));
                logEvent('error', error);
            });

            // Set up data change listeners to update summary
            listbox.on('render', () => updateDataSummary());

            // Configure and set data
            listbox.setIdField('id')
                   .setDisplayMode('grid')
                   .setSelectionMode('replace')
                   .setSource(testData);
            
            updateDataSummary();
            return listbox;
        }

        function reloadData() {
            log('=== Reloading Test Data ===');
            createListbox();
            log('Test data reloaded with 10 employee records');
        }

        function showCurrentData() {
            if (!listbox || !listbox.viewDm) {
                log('No data available');
                return;
            }
            
            const data = listbox.viewDm.toRecordset();
            log('=== Current View Data ===');
            data.forEach((row, index) => {
                log(`${index}: ID ${row.id} - ${row.firstName} ${row.lastName}, ${row.age}, ${row.department}, $${row.salary}, ${row.isActive ? 'Active' : 'Inactive'}`);
            });
        }

        // === UPDATE OPERATIONS ===

        function updateSingleField() {
            const id = parseInt(document.getElementById('update-field-id').value);
            const fieldName = document.getElementById('update-field-name').value;
            const newValue = document.getElementById('update-field-value').value;
            
            // Convert value to appropriate type
            let typedValue = newValue;
            if (fieldName === 'age' || fieldName === 'salary') {
                typedValue = parseInt(newValue);
            } else if (fieldName === 'isActive') {
                typedValue = newValue.toLowerCase() === 'true';
            }
            
            log(`=== Update Single Field: ID ${id}, ${fieldName} = ${typedValue} ===`);
            listbox.updateRow(id, fieldName, typedValue);
            log(`Updated ${fieldName} for ID ${id} to: ${typedValue}`);
        }

        function updateEntireRow() {
            const id = parseInt(document.getElementById('update-row-id').value);
            
            const newData = {
                firstName: 'Updated',
                lastName: 'Person',
                age: 99,
                department: 'Research',
                salary: 120000,
                isActive: true,
                email: 'updated@example.com'
            };
            
            log(`=== Update Entire Row: ID ${id} ===`);
            listbox.updateRow(id, newData);
            log(`Updated entire row for ID ${id} with new data`);
        }

        function quickUpdateDemo() {
            log('=== Quick Demo: Age +1 for ID 3 ===');
            // Get current data to increment age
            const currentData = listbox.viewDm.toRecordset();
            const row = currentData.find(r => r.id === 3);
            if (row) {
                listbox.updateRow(3, 'age', row.age + 1);
                log(`Incremented age for ID 3 to ${row.age + 1}`);
            }
        }

        function quickSalaryBoost() {
            log('=== Quick Demo: Salary +$5k for ID 4 ===');
            const currentData = listbox.viewDm.toRecordset();
            const row = currentData.find(r => r.id === 4);
            if (row) {
                listbox.updateRow(4, 'salary', row.salary + 5000);
                log(`Increased salary for ID 4 to $${row.salary + 5000}`);
            }
        }

        function toggleActiveStatus() {
            log('=== Quick Demo: Toggle Active for ID 5 ===');
            const currentData = listbox.viewDm.toRecordset();
            const row = currentData.find(r => r.id === 5);
            if (row) {
                listbox.updateRow(5, 'isActive', !row.isActive);
                log(`Toggled active status for ID 5 to ${!row.isActive}`);
            }
        }

        // === REMOVE OPERATIONS ===

        function removeSelectedRows() {
            const idsInput = document.getElementById('remove-ids').value.trim();
            if (!idsInput) {
                log('Please enter row ID(s) to remove');
                return;
            }
            
            const ids = idsInput.includes(',') 
                ? idsInput.split(',').map(id => parseInt(id.trim())).filter(id => !isNaN(id))
                : [parseInt(idsInput)];
            
            log(`=== Remove Rows: ${ids.join(', ')} ===`);
            listbox.removeData(ids);
            log(`Removed rows with IDs: ${ids.join(', ')}`);
        }

        function removeLastRow() {
            if (!listbox.viewDm) return;
            const data = listbox.viewDm.toRecordset();
            if (data.length === 0) {
                log('No rows to remove');
                return;
            }
            
            const lastRow = data[data.length - 1];
            log(`=== Remove Last Row: ID ${lastRow.id} ===`);
            listbox.removeData(lastRow.id);
            log(`Removed last row (ID ${lastRow.id})`);
        }

        function removeFirstRow() {
            if (!listbox.viewDm) return;
            const data = listbox.viewDm.toRecordset();
            if (data.length === 0) {
                log('No rows to remove');
                return;
            }
            
            const firstRow = data[0];
            log(`=== Remove First Row: ID ${firstRow.id} ===`);
            listbox.removeData(firstRow.id);
            log(`Removed first row (ID ${firstRow.id})`);
        }

        function removeMultipleRows() {
            log('=== Remove Multiple Rows: IDs 7,8,9 ===');
            listbox.removeData([7, 8, 9]);
            log('Removed rows with IDs: 7, 8, 9');
        }

        // === ADD OPERATIONS ===

        function generateNewEmployee() {
            const firstNames = ['Alex', 'Sam', 'Jordan', 'Casey', 'Riley', 'Morgan', 'Avery', 'Quinn'];
            const lastNames = ['Wilson', 'Taylor', 'Anderson', 'Thomas', 'Jackson', 'White', 'Harris', 'Martin'];
            const departments = ['Engineering', 'Marketing', 'Sales', 'HR', 'Operations', 'Finance'];
            
            return {
                id: ++idCounter,
                firstName: firstNames[Math.floor(Math.random() * firstNames.length)],
                lastName: lastNames[Math.floor(Math.random() * lastNames.length)],
                age: Math.floor(Math.random() * 40) + 22, // 22-62
                department: departments[Math.floor(Math.random() * departments.length)],
                salary: Math.floor(Math.random() * 50000) + 50000, // $50k-$100k
                isActive: Math.random() > 0.2, // 80% chance of being active
                email: `employee${idCounter}@example.com`
            };
        }

        function addSingleRow() {
            const afterIdInput = document.getElementById('add-after-id').value;
            const afterId = afterIdInput ? parseInt(afterIdInput) : undefined;
            
            const newEmployee = generateNewEmployee();
            
            log(`=== Add Single Row: ID ${newEmployee.id} ${afterId ? `after ID ${afterId}` : 'at end'} ===`);
            listbox.addData(newEmployee, afterId);
            log(`Added employee: ${newEmployee.firstName} ${newEmployee.lastName} (ID ${newEmployee.id})`);
        }

        function addMultipleRows() {
            const afterIdInput = document.getElementById('add-after-id').value;
            const afterId = afterIdInput ? parseInt(afterIdInput) : undefined;
            
            const newEmployees = [generateNewEmployee(), generateNewEmployee(), generateNewEmployee()];
            
            log(`=== Add Multiple Rows: ${newEmployees.length} employees ${afterId ? `after ID ${afterId}` : 'at end'} ===`);
            listbox.addData(newEmployees, afterId);
            log(`Added ${newEmployees.length} employees with IDs: ${newEmployees.map(e => e.id).join(', ')}`);
        }

        function addToEnd() {
            const newEmployee = generateNewEmployee();
            log(`=== Add to End: ID ${newEmployee.id} ===`);
            listbox.addData(newEmployee);
            log(`Added employee to end: ${newEmployee.firstName} ${newEmployee.lastName} (ID ${newEmployee.id})`);
        }

        function addToBeginning() {
            if (!listbox.viewDm) return;
            const data = listbox.viewDm.toRecordset();
            if (data.length === 0) {
                addToEnd();
                return;
            }
            
            // To add to beginning, we add after nothing (which will put it at start)
            const newEmployee = generateNewEmployee();
            log(`=== Add to Beginning: ID ${newEmployee.id} ===`);
            
            // For now, we'll add after the first element and then we'd need to handle positioning
            // This is a limitation of the current implementation - true "beginning" insertion
            // would require more sophisticated positioning logic
            listbox.addData(newEmployee);
            log(`Added employee: ${newEmployee.firstName} ${newEmployee.lastName} (ID ${newEmployee.id})`);
        }

        function addAfterSelected() {
            const selected = listbox.getSelected();
            if (selected.length === 0) {
                log('Please select a row first');
                return;
            }
            
            const afterId = selected[0];
            const newEmployee = generateNewEmployee();
            
            log(`=== Add After Selected: ID ${newEmployee.id} after ID ${afterId} ===`);
            listbox.addData(newEmployee, afterId);
            log(`Added employee after selected row: ${newEmployee.firstName} ${newEmployee.lastName} (ID ${newEmployee.id})`);
        }

        function addRandomEmployee() {
            const newEmployee = generateNewEmployee();
            log(`=== Add Random Employee: ID ${newEmployee.id} ===`);
            listbox.addData(newEmployee);
            log(`Added random employee: ${newEmployee.firstName} ${newEmployee.lastName}, ${newEmployee.age}, ${newEmployee.department}, $${newEmployee.salary}`);
        }

        // === COMBINED OPERATIONS ===

        function addUpdateRemoveChain() {
            log('=== Add → Update → Remove Chain ===');
            
            // Add new employee
            const newEmployee = generateNewEmployee();
            listbox.addData(newEmployee);
            log(`1. Added: ${newEmployee.firstName} ${newEmployee.lastName} (ID ${newEmployee.id})`);
            
            // Update their salary
            setTimeout(() => {
                listbox.updateRow(newEmployee.id, 'salary', 100000);
                log(`2. Updated salary for ID ${newEmployee.id} to $100,000`);
                
                // Remove them after another delay
                setTimeout(() => {
                    listbox.removeData(newEmployee.id);
                    log(`3. Removed employee ID ${newEmployee.id}`);
                    log('Chain completed!');
                }, 1000);
            }, 1000);
        }

        function massUpdateDemo() {
            log('=== Mass Update Demo ===');
            
            if (!listbox.viewDm) return;
            const data = listbox.viewDm.toRecordset();
            
            // Give everyone in Engineering a raise
            const engineeringEmployees = data.filter(emp => emp.department === 'Engineering');
            log(`Giving ${engineeringEmployees.length} Engineering employees a $10k raise`);
            
            engineeringEmployees.forEach(emp => {
                listbox.updateRow(emp.id, 'salary', emp.salary + 10000);
            });
            
            log('Mass update completed!');
        }

        function dataReorganization() {
            log('=== Data Reorganization Demo ===');
            
            // Add a few new employees
            const newEmployees = [generateNewEmployee(), generateNewEmployee()];
            listbox.addData(newEmployees);
            log(`Added ${newEmployees.length} new employees`);
            
            // Update some existing employees
            setTimeout(() => {
                if (listbox.viewDm) {
                    const data = listbox.viewDm.toRecordset();
                    if (data.length > 2) {
                        listbox.updateRow(data[0].id, 'department', 'New Department');
                        listbox.updateRow(data[1].id, 'isActive', false);
                        log('Updated department and status for first two employees');
                    }
                }
                
                // Remove some employees
                setTimeout(() => {
                    if (listbox.viewDm) {
                        const data = listbox.viewDm.toRecordset();
                        const toRemove = data.slice(-2).map(emp => emp.id); // Remove last 2
                        if (toRemove.length > 0) {
                            listbox.removeData(toRemove);
                            log(`Removed last 2 employees: ${toRemove.join(', ')}`);
                        }
                    }
                    log('Data reorganization completed!');
                }, 1000);
            }, 1000);
        }

        function filterUpdateDemo() {
            log('=== Filter + Update Demo ===');
            
            // First apply a filter
            listbox.search({ department: 'Engineering' });
            log('Filtered to show only Engineering employees');
            
            setTimeout(() => {
                // Update visible employees
                if (listbox.viewDm) {
                    const data = listbox.viewDm.toRecordset();
                    if (data.length > 0) {
                        listbox.updateRow(data[0].id, 'firstName', 'Senior ' + data[0].firstName);
                        log(`Promoted first Engineering employee to Senior`);
                    }
                }
                
                // Clear filter to see all changes
                setTimeout(() => {
                    listbox.clearSearch();
                    log('Cleared filter - showing all employees including updates');
                }, 1500);
            }, 1000);
        }

        // === MODE TESTING ===

        function switchToGrid() {
            log('=== Switching to Grid Mode ===');
            listbox.setDisplayMode('grid');
            log('Switched to grid mode');
        }

        function switchToList() {
            log('=== Switching to List Mode ===');
            listbox.setDisplayMode('list');
            log('Switched to list mode');
        }

        function testInBothModes() {
            log('=== Testing Operations in Both Modes ===');
            
            // Start in grid mode
            listbox.setDisplayMode('grid');
            log('1. Testing in Grid Mode...');
            
            // Add an employee
            const newEmployee1 = generateNewEmployee();
            listbox.addData(newEmployee1);
            log(`Added employee in grid mode: ID ${newEmployee1.id}`);
            
            setTimeout(() => {
                // Switch to list mode
                listbox.setDisplayMode('list');
                log('2. Switched to List Mode...');
                
                // Update the employee
                listbox.updateRow(newEmployee1.id, 'salary', 150000);
                log(`Updated salary in list mode for ID ${newEmployee1.id}`);
                
                setTimeout(() => {
                    // Switch back to grid mode
                    listbox.setDisplayMode('grid');
                    log('3. Switched back to Grid Mode...');
                    
                    // Remove the employee
                    listbox.removeData(newEmployee1.id);
                    log(`Removed employee in grid mode: ID ${newEmployee1.id}`);
                    log('Both modes testing completed!');
                }, 1500);
            }, 1500);
        }

        // Auto-initialize
        setTimeout(() => {
            log('Auto-initializing Sprint 7 debug with test data...');
            createListbox();
        }, 500);
    </script>
</body>
</html>